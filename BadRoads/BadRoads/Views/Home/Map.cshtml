@model IEnumerable<BadRoads.Models.Point>
@{
    ViewBag.Title = "Карта с дефектами дорог"; <!-- NEED LOCALIZATION -->

    <p id="stringforMap" data-str="@ViewBag.MarkerLocation"></p>
}
@if (Model != null && Model.Count() > 0)
{
    foreach (var item in Model)                   // create undisplayable tags to transfer data in js script
    {
    <p data-latitude="@item.GeoData.Latitude" data-longitude="@item.GeoData.Longitude" data-adress="@item.GeoData.FullAddress" data-id="@item.ID" class="points"></p>
    }
}
<!-- PopUp-message structure/ Show, only after adding new point-->
@if (ViewBag.NeedShowPopup == true)
{    
    <div class="popupblock">
        <h3>Спасибо</h3>
        <p>
            Ваша точка добавлена, но требует модерации.<br />
            Пройдет совсем немного времени и наш модератор добавит Вашу проблему в общий список.
        </p>
        <button onclick="new function () { $('.popupblock').css('display', 'none');}">Ok</button>
        <!-- NEED LOCALIZATION -->
    </div>
}
<div class="section group vh8">
    <div class="col second span_5_of_5">
        <h1 class="center_text">@ViewBag.Title</h1>
        <input class="searchmap" type="text" id="searchAdress" placeholder="Поиск" /><!-- NEED LOCALIZATION -->
        <div id="resultSearch f"></div>
    </div>
</div>
<div class="section group">
    <div class="col second span_5_of_5">
        <div id="map_canvas"></div>
    </div>
</div>
@section Scripts {
     @*connect script Google Maps API depends on the chosen language*@
    @if (ViewBag.Lang == "uk")
    {
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&language=uk"></script>
    }
    else if (ViewBag.Lang == "ru")
    {
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&language=ru"></script>
    }
    else if (ViewBag.Lang == "en")
    {
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&language=en"></script>
    }
    else
    {
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&language=ru"></script>
    }
    
@*connect script for marker's clustering*@
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    
    @Scripts.Render("~/Scripts/map.js")
}